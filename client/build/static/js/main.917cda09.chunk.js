(this.webpackJsonphodo_client=this.webpackJsonphodo_client||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/hodo.e251b13c.png"},35:function(e,t,a){e.exports=a(62)},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),o=a.n(s),c=a(2),l=a(3),i=a(7),u=a(6),m=a(8),d=a(15),p=a(11),h=a(16),g=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"authenticateUser",value:function(e){localStorage.setItem("token",e)}},{key:"isUserAuthenticated",value:function(){return null!==localStorage.getItem("token")}},{key:"deauthenticateUser",value:function(){localStorage.removeItem("token")}},{key:"getToken",value:function(){return localStorage.getItem("token")}}]),e}(),f=function(e){var t=e.component,a=Object(h.a)(e,["component"]);return r.a.createElement(p.b,Object.assign({},a,{render:function(e){return g.isUserAuthenticated()?r.a.createElement(t,Object.assign({},e,a)):r.a.createElement(p.a,{to:{pathname:"/",state:{from:e.location}}})}}))},b=function(e){var t=e.component,a=Object(h.a)(e,["component"]);return r.a.createElement(p.b,Object.assign({},a,{render:function(e){return g.isUserAuthenticated()?r.a.createElement(p.a,{to:{pathname:"/",state:{from:e.location}}}):r.a.createElement(t,Object.assign({},e,a))}}))},v=function(e){var t=e.component,a=Object(h.a)(e,["component"]);return r.a.createElement(p.b,Object.assign({},a,{render:function(e){return r.a.createElement(t,Object.assign({},e,a))}}))},E=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.toggleAuthenticateStatus()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Homepage"))}}]),t}(r.a.Component),w=a(13),y=a.n(w),N={login:function(e){return y.a.post("/auth/login",e)},signUp:function(e){return y.a.post("/auth/signup",e)},dashboard:function(){return y.a.get("/public/points")},points:function(e,t,a){return y.a.put("/api/points",{house:e,points:t},{headers:{Authorization:"bearer ".concat(a)}})},owl:function(e,t){return y.a.put("/api/giveowl",{house:e},{headers:{Authorization:"bearer ".concat(t)}})},weekreset:function(e,t){return y.a.put("/api/weekreset",{headers:{Authorization:"bearer ".concat(t)}})}},k=a(18),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={errors:{},successMessage:"",user:{username:"",password:""}},a.processForm=function(e){e.preventDefault();var t=a.state.user,n=t.username,r=t.password;N.login({username:n,password:r}).then((function(e){g.authenticateUser(e.data.token),a.props.toggleAuthenticateStatus(),a.props.history.push("/dashboard")})).catch((function(e){var t=e.response,n=t.data.errors?t.data.errors:{};n.summary=t.data.message,a.setState({errors:n})}))},a.changeUser=function(e){var t=e.target.name,n=a.state.user;n[t]=e.target.value,a.setState({user:n})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("successMessage"),t="";e&&(t=e,localStorage.removeItem("successMessage")),this.setState({successMessage:t})}},{key:"componentWillUnmount",value:function(){this.setState({errors:{}})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"admin-logo"},r.a.createElement("img",{src:k,alt:"Houses of Design Olympics",width:"400px"}))),r.a.createElement("div",{className:"row mt-20p"},r.a.createElement("div",{className:"col-md-12 col-lg-4"}),r.a.createElement("div",{className:"col-md-12 col-lg-4"},r.a.createElement("form",{action:"/",onSubmit:this.processForm},this.state.successMessage&&r.a.createElement("p",{className:"text-success"},this.state.successMessage),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"login-form-username"},"Username"),r.a.createElement("input",{type:"text",name:"username",className:"form-control",id:"login-form-username",placeholder:"Enter username","aria-describedby":"login-usernameHelp",value:this.state.user.username,onChange:this.changeUser}),r.a.createElement("small",{id:"login-usernameHelp",className:"form-text text-danger"},this.state.errors.username)),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{htmlFor:"login-form-username"},"Password"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",id:"login-form-password",placeholder:"Enter password","aria-describedby":"login-passwordHelp",value:this.state.user.password,onChange:this.changeUser}),r.a.createElement("small",{id:"login-passwordHelp",className:"form-text text-danger"},this.state.errors.password)),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-primary mt-4"},"Login"))))))}}]),t}(r.a.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){g.deauthenticateUser(),this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Logging out..."))}}]),t}(r.a.Component),S=a(18),x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={errors:{},user:{username:"",name:"",password:""}},a.processForm=function(e){e.preventDefault();var t=a.state.user,n=t.name,r=t.username,s=t.password;N.signUp({name:n,username:r,password:s}).then((function(e){localStorage.setItem("successMessage",e.data.message),a.props.history.push("/login"),a.setState({errors:{}})})).catch((function(e){var t=e.response,n=t.data.errors?t.data.errors:{};n.summary=t.data.message,a.setState({errors:n})}))},a.changeUser=function(e){var t=e.target.name,n=a.state.user;n[t]=e.target.value,a.setState({user:n})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"admin-logo"},r.a.createElement("img",{src:S,alt:"Houses of Design Olympics",width:"400px"}))),r.a.createElement("div",{className:"row mt-10p"},r.a.createElement("div",{className:"col-md-12 col-lg-4"}),r.a.createElement("div",{className:"col-md-12 col-lg-4"},r.a.createElement("h2",null,"Admin signup"),r.a.createElement("form",{action:"/",onSubmit:this.processForm},this.state.errors.summary&&r.a.createElement("p",{className:"error-message"},this.state.errors.summary),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"signup-form-name"},"Name"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",id:"signup-form-name","aria-describedby":"signup-nameHelp",value:this.state.user.name,onChange:this.changeUser}),r.a.createElement("small",{id:"signup-nameHelp",className:"form-text text-danger"},this.state.errors.name)),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{htmlFor:"signup-form-name"},"Username"),r.a.createElement("input",{type:"text",name:"username",className:"form-control",id:"signup-form-username","aria-describedby":"signup-usernameHelp",value:this.state.user.username,onChange:this.changeUser}),r.a.createElement("small",{id:"signup-usernameHelp",className:"form-text text-danger"},this.state.errors.username)),r.a.createElement("div",{className:"mt-3"},r.a.createElement("label",{htmlFor:"signup-form-password"},"Password"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",id:"signup-form-password","aria-describedby":"signup-passwordHelp",value:this.state.user.password,onChange:this.changeUser}),r.a.createElement("small",{id:"signup-passwordHelp",className:"form-text text-danger"},this.state.errors.password)),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-primary mt-4"},"Signup"))))))}}]),t}(r.a.Component),C=a(34),A=a(18),U=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],user:{},Gestalt:0,Heuristics:0,Context:0},a.getData=function(){N.dashboard().then((function(e){a.setState({data:e.data})}))},a.handlePointInputChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(C.a)({},t,n))},a.handlePointChange=function(e,t){N.points(e,t,g.getToken()).then((function(e){a.getData()}))},a.handleOwl=function(e){N.owl(e,g.getToken()).then((function(e){a.getData()}))},a.handleWeekReset=function(){window.confirm("Are you sure you want to reset the week count for all houses?")&&N.weekreset(g.getToken()).then((function(e){a.getData()}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row admin-nav"},r.a.createElement("div",{className:"admin-logo"},r.a.createElement("img",{src:A,alt:"Houses of Design Olympics",width:"400px"})),r.a.createElement("div",{className:"admin-nav-right"},r.a.createElement(d.b,{to:"/logout",className:"admin-nav-right"},"Logout"),r.a.createElement("hr",null),r.a.createElement("a",{href:"#",onClick:this.handleWeekReset},"Reset week"))),r.a.createElement("div",{className:"row mt-10p"},this.state.data?this.state.data.map((function(t){return r.a.createElement("div",{className:"col-12 col-md-4 col-xl-4 mb-5",key:t.house},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("h5",null,"House of ",t.house),r.a.createElement("h6",{className:"mb-2 text-muted"},"House TA: ",t.head),r.a.createElement("h1",null,r.a.createElement("strong",null,t.points)),r.a.createElement("p",null,"Points this week: ",t.weekpoints),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("button",{onClick:function(){return e.handlePointChange(t.house,-1)},className:"btn btn-outline-secondary",type:"button",id:"admin-minus-".concat(t.house)},"-1"),r.a.createElement("button",{onClick:function(){return e.handlePointChange(t.house,1)},className:"btn btn-outline-secondary",type:"button",id:"admin-plus-".concat(t.house)},"+1")),r.a.createElement("input",{type:"text",onChange:e.handlePointInputChange,name:t.house,className:"form-control",placeholder:"","aria-label":"Number of points to add",value:e.state[t.house]}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{onClick:function(){return e.handlePointChange(t.house,e.state[t.house])},className:"btn btn-primary",type:"button",id:"admin-add-".concat(t.house)},"+",e.state[t.house]))),r.a.createElement("hr",null),r.a.createElement("button",{type:"button",onClick:function(){return e.handleOwl(t.house)},className:t.owl?"btn btn-secondary btn-lg btn-block":"btn btn-primary btn-lg btn-block"},t.owl?"Has the owl":"Give the owl"))))})):""))}}]),t}(r.a.Component),H=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={authenticated:!1},a.toggleAuthenticateStatus=function(){a.setState({authenticated:g.isUserAuthenticated()})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.toggleAuthenticateStatus()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement(v,{exact:!0,path:"/",component:E,toggleAuthenticateStatus:this.toggleAuthenticateStatus}),r.a.createElement(f,{path:"/dashboard",component:U}),r.a.createElement(b,{path:"/login",component:O,toggleAuthenticateStatus:this.toggleAuthenticateStatus}),r.a.createElement(b,{path:"/signup",component:x}),r.a.createElement(p.b,{path:"/logout",component:j})))}}]),t}(n.Component),D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(H,null),document.getElementById("react-app")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");D?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):M(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):M(e)}))}}()}},[[35,1,2]]]);
//# sourceMappingURL=main.917cda09.chunk.js.map